<div class="app-layout" app-layout ng-controller="createDTreeCtrl">
<!-- canvas-option-->
<div id="canvas-option" class="btn btn-group-vertical round" ng-class="canvasUiStyle">
    <a role="button" class="btn btn-default" id="co-find-root"
       tooltip="reset" tooltip-placement="left" tooltip-popup-delay="1000"><i
            class="glyphicon glyphicon-map-marker"></i></a>
    <a class="btn btn-default" role="button" id="co-zoom-in"
       tooltip="zoom in" tooltip-placement="left" tooltip-popup-delay="1000"><i class="fa fa-plus"></i>
    </a>
    <a role="button" class="btn btn-default" id="co-zoom-out"
       tooltip="zoom out" tooltip-placement="left" tooltip-popup-delay="1000"><i class="fa fa-minus"></i>
    </a>
    <a role="button" class="btn btn-default" id="co-undo"
       tooltip="undo" tooltip-placement="left" tooltip-popup-delay="1000"><i class="fa fa-undo"></i>
    </a>
    <a role="button" class="btn btn-default" id="co-redo"
       tooltip="redo" tooltip-placement="left" tooltip-popup-delay="1000"><i class="fa fa-repeat"></i>
    </a>
    <a role="button" class="btn btn-default" id="co-collapse"
       tooltip="collapse all nodes" tooltip-placement="left" tooltip-popup-delay="1000"><i
            class="fa fa-compress"></i>
    </a>

    <button type="button" class="btn btn-default"
            popover-placement="left"
            popover-title="style select"
            popover-trigger="focus"
            popover='<div class="subsection bordered image grid">
                                <ul >
                                    <li><a href="" canvas-ui-switch="blue-print"><span><img src="styles/img/blueprint.png" title="blue-print"></span></a></li>
                                    <li><a href="" canvas-ui-switch="white-print"><span><img src="styles/img/fresh.png" title="white-print"></span></a></li>
                                </ul>
                            </div>'
            ><i class="fa fa-gear"></i></button>
</div>
<!-- ui-layout-center -->
<div class="ui-layout-center ui-layout-canvas">
    <!--canvas of Dtree -->
    <div id="canvas" ng-class="canvasUiStyle">
        <!-- Dtree -->
        <dtree data="node_array" option="tree_config"></dtree>
    </div>
    <!-- end of canvas -->

    <!-- context-menu, the menu for common node of Dtree -->
    <div id="context-menu">
        <ul class="dropdown-menu" role="menu">
            <li class="dropdown-submenu">
                <a tabindex="-1" href="javascript:void(0);" id="insert-node" class="context-menu-item"
                   title="(enter)"><span class="glyphicon glyphicon-pushpin"></span>&nbsp;&nbsp;insert node</a>
                <ul class="dropdown-menu">
                    <li>
                        <a tabindex="-1" href="javascript:void(0);" class="context-menu-item"
                           id="insert-change-node">Change</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" class="context-menu-item"
                           id="insert-terminal-node">Terminal</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" class="context-menu-item"
                           id="insert-decision-node">Decision</a>
                    </li>
                </ul>
            </li>
            <li class="dropdown-submenu">
                <a tabindex="-1" href="javascript:void(0);" class="context-menu-item" id="change-node"
                   title="(blank)"><span class="glyphicon glyphicon-paperclip"></span>&nbsp;&nbsp;change node</a>
                <ul class="dropdown-menu">
                    <li>
                        <a tabindex="-1" href="javascript:void(0);" class="context-menu-item"
                           id="change-to-change-node">Change</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" class="context-menu-item"
                           id="change-to-decision-node">Decision</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" class="context-menu-item"
                           id="change-to-terminal-node">Terminal</a>
                    </li>
                </ul>
            </li>
            <!--<li class="disabled"><a tabindex="-1" href="javascript:void(0);" class="context-menu-item"-->
            <!--id="clone-node" title="(C)"><i class="fa fa-cubes"></i>&nbsp;&nbsp;clone </a>-->
            <!--</li>-->
            <li><a tabindex="-1" href="javascript:void(0);" class="context-menu-item"
                   id="select-subtree" title="(S)"><i class="fa fa-tree"></i>&nbsp;&nbsp;select subtree </a>
            </li>
            <li><a tabindex="-1" href="javascript:void(0);" class="context-menu-item"
                   id="add-tip" title="(T)"><i class="fa fa-file-text"></i>&nbsp;&nbsp;add tip </a>
            </li>
            <li><a tabindex="-1" href="javascript:void(0);" class="context-menu-item"
                   id="remove-tip" title="(T)"><i class="fa fa-file-text-o"></i>&nbsp;&nbsp;remove tip </a>
            </li>
            <li class="divider"></li>
            <li><a tabindex="-1" href="javascript:void(0);" class="context-menu-item" id="evaluation-node"
                   title="(E)"><i class="fa fa-building-o"></i>&nbsp;&nbsp;evaluation </a></li>
            <li class="divider"></li>
            <li><a tabindex="-1" href="javascript:void(0);" class="context-menu-item" id="cut-node"
                   title="(ctrl+x)"><i class="fa fa-scissors"></i>&nbsp;&nbsp;cut</a></li>
            <li><a tabindex="-1" href="javascript:void(0);" class="context-menu-item" id="copy-node"
                   title="(ctrl+c)"><i class="fa fa-files-o"></i>&nbsp;&nbsp;copy </a></li>
            <li><a tabindex="-1" href="javascript:void(0);" class="context-menu-item" id="paste-node"
                   title="(ctrl+v)"><i class="fa fa-clipboard"></i>&nbsp;&nbsp;paste </a></li>
            <li><a tabindex="-1" href="javascript:void(0);" class="context-menu-item" id="delete-node"
                   title="(delete)"><i class="fa fa-times"></i>&nbsp;&nbsp;delete </a></li>
        </ul>
    </div>
    <!-- end of context-menu -->


    <!-- end-area-menu, another menu for terminal node-box -->
    <div id="end-area-menu">
        <ul class="dropdown-menu" role="menu">
            <li><a tabindex="-1" href="javascript:void(0);" class="context-menu-item" id="align-payoff"
                   title="(E)"><i class="fa fa-align-right"></i>&nbsp;&nbsp;align</a></li>
            <li><a tabindex="-1" href="javascript:void(0);" class="context-menu-item" id="not-align-payoff"
                   title="(E)"><i class="fa fa-align-center"></i>&nbsp;&nbsp;not align</a></li>
            <li class="divider"></li>
            <li><a tabindex="-1" href="javascript:void(0);" class="context-menu-item" id="edit-payoff"
                   title="(E)"><i class="fa fa-edit"></i>&nbsp;&nbsp;edit payoff</a></li>
            <li class="divider"></li>
            <li><a tabindex="-1" href="javascript:void(0);" class="context-menu-item" id="uncheck-this-path"
                   title="(E)"><i class="fa fa-ban"></i>&nbsp;&nbsp;uncheck path</a></li>
            <li><a tabindex="-1" href="javascript:void(0);" class="context-menu-item" id="check-this-path"
                   title="(E)"><i class="fa fa-code-fork fa-rotate-90"></i>&nbsp;&nbsp;&nbsp;check path</a></li>

        </ul>
    </div>
    <!-- end of end-area-menu -->
</div>
<!-- end of ui-layout-center -->

<!-- ui-layout-south -->
<div class="ui-layout-south">
    <div class="ui-tab-container">
        <tabset class="ui-tab">

            <tab heading="Tree Properties">
                <tabset class="ui-tab tabs-left">

                    <tab heading="variables">
                        <div class="tab-grid-warp">
                            <div class="row button-bar">
                                <div class="col-md-8">
                                    <div class="widget-container">
                                        <a href="javascript:;" class="btn-icon-round btn-icon-round-sm bg-primary"
                                           data-ng-disabled="selectedNodeParamData.length == 0"
                                           ng-click="openEditParameterDialog()"><i class="fa fa-edit"></i></a>
                                        <a href="javascript:;" class="btn-icon-round btn-icon-round-sm bg-success"
                                           data-ng-disabled="!selectedNodeData" ng-click="openAddParameterDialog()"><i
                                                class="fa fa-plus"></i></a>
                                        <a href="javascript:;" class="btn-icon-round btn-icon-round-sm bg-danger"
                                           data-ng-disabled="selectedNodeParamData.length == 0"
                                           ng-click="openDeleteParameterDialog()"><i class="fa fa-times"></i></a>
                                    </div>
                                </div>
                                <div class="form-group col-md-4">
                                    <input type="text" class="form-control" ng-model="variablesGridOption.searchFilter">
                                    <span class="icon glyphicon glyphicon-search"></span>
                                </div>
                            </div>
                            <div angrid="variablesGridOption"></div>
                        </div>
                    </tab>

                    <tab heading="tables" ng-controller="tableCtrl">
                        <div class="tab-grid-warp left">
                            <div class="row button-bar">
                                <div class="col-md-8">
                                    <div class="widget-container">
                                        <a href="javascript:;" class="btn-icon-round btn-icon-round-sm bg-primary"
                                           data-ng-disabled="selected_table_array.length == 0"><i
                                                ng-click="openEditTableDialog()" class="fa fa-edit"></i></a>
                                        <a href="javascript:;" class="btn-icon-round btn-icon-round-sm bg-success"
                                           ng-click="openAddTableDialog()"><i class="fa fa-plus"></i></a>
                                        <a href="javascript:;" class="btn-icon-round btn-icon-round-sm bg-danger"
                                           data-ng-disabled="selected_table_array.length == 0"><i
                                                ng-click="openDeleteTableDialog()" class="fa fa-times"></i></a>
                                    </div>
                                </div>
                                <div class="form-group col-md-4">
                                    <input type="text" class="form-control"
                                           ng-model="table_grid_option.searchFilter">
                                    <span class="icon glyphicon glyphicon-search"></span>
                                </div>
                            </div>
                            <div angrid="table_grid_option"></div>
                        </div>
                        <div class="panel panel-default tab-grid-warp right">
                            <div class="panel-heading">
                                <i class="glyphicon glyphicon-th"></i>
                                <span ng-show="selected_table_array.length == 0">No Table Selected</span>
                                <span ng-show="selected_table_array.length > 0">Table Details for: {{selected_table_array[0].name}}</span>
                            </div>

                            <div class="panel-body ng-scope">
                                <div class="row">
                                    <div class="col-md-8">
                                        <div class="widget-container">
                                            <a href="javascript:;" class="btn-icon-round btn-icon-round-sm bg-primary"
                                               data-ng-disabled="selected_table_array.length == 0"><i
                                                    ng-click="openEditTableDialog()" class="fa fa-edit"></i></a>
                                            <a href="javascript:;" class="btn-icon-round btn-icon-round-sm bg-success"
                                               ng-click="openAddTableDialog()"><i class="fa fa-plus"></i></a>
                                            <a href="javascript:;" class="btn-icon-round btn-icon-round-sm bg-danger"
                                               data-ng-disabled="selected_table_array.length == 0"><i
                                                    ng-click="openDeleteTableDialog()" class="fa fa-times"></i></a>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-4">
                                        <input type="text" class="form-control"
                                               ng-model="table_grid_option.searchFilter">
                                        <span class="icon glyphicon glyphicon-search"></span>
                                    </div>
                                </div>
                                <div angrid="table_grid_option" class="table_detail_grid"></div>
                            </div>
                        </div>
                    </tab>

                    <tab heading="distribution" ng-controller="distrCtrl">
                        <div class="tab-grid-warp">
                            <div class="row button-bar">
                                <div class="col-md-8">
                                    <div class="widget-container">
                                        <a href="javascript:;" class="btn-icon-round btn-icon-round-sm bg-primary"
                                           data-ng-disabled="selected_distr_array.length == 0"><i
                                                ng-click="openEditDistrDialog()" class="fa fa-edit"></i></a>
                                        <a href="javascript:;" class="btn-icon-round btn-icon-round-sm bg-success"
                                           ng-click="openAddDistrDialog()"><i class="fa fa-plus"></i></a>
                                        <a href="javascript:;" class="btn-icon-round btn-icon-round-sm bg-danger"
                                           data-ng-disabled="selected_distr_array.length == 0"><i
                                                ng-click="openDeleteDistrDialog()" class="fa fa-times"></i></a>
                                    </div>
                                </div>
                                <div class="form-group col-md-4">
                                    <input type="text" class="form-control" ng-model="distr_grid_option.searchFilter">
                                    <span class="icon glyphicon glyphicon-search"></span>
                                </div>
                            </div>
                            <div angrid="distr_grid_option"></div>
                        </div>
                    </tab>

                    <tab heading="general">
                        <div class="tab-grid-warp">
                            <div angrid="generalGridOption"></div>
                        </div>
                    </tab>
                </tabset>
            </tab>

            <tab heading="Node redefined">
                <div class="tab-grid-warp all">
                    <div class="row button-bar">
                        <div class="col-md-8">
                            <div class="widget-container">
                                <a href="javascript:;" class="btn-icon-round btn-icon-round-sm bg-primary"
                                   data-ng-disabled="selectedNodeParamData.length == 0"
                                   ng-click="openEditParameterDialog()"><i class="fa fa-edit"></i></a>
                                <a href="javascript:;" class="btn-icon-round btn-icon-round-sm bg-success"
                                   data-ng-disabled="!selectedNodeData" ng-click="openAddParameterDialog()"><i
                                        class="fa fa-plus"></i></a>
                                <a href="javascript:;" class="btn-icon-round btn-icon-round-sm bg-danger"
                                   data-ng-disabled="selectedNodeParamData.length == 0"
                                   ng-click="openDeleteParameterDialog()"><i class="fa fa-times"></i></a>
                            </div>
                        </div>
                        <div class="form-group col-sm-4">
                            <input type="text" class="form-control" ng-model="NodeGridOption.searchFilter">
                            <span class="icon glyphicon glyphicon-search"></span>
                        </div>
                    </div>
                    <div angrid="NodeGridOption" class="with-button-bar"></div>
                </div>
            </tab>

            <tab heading="Markov Info">
                <p>this is test</p>

                <p>selectedNodeParamData: {{selectedNodeParamData}}</p>
            </tab>

            <tab heading="Tree style">
                <p>this is test</p>
            </tab>
            <tab heading="Storage Test">
                <section class="panel panel-default">
                    <div class="panel-heading"><span class="glyphicon glyphicon-th"></span> Notify</div>
                    <div class="panel-body ng-scope">
                        <button class="btn btn-gap btn-warning" ng-click="createDtreeData()">create</button>
                        <button class="btn btn-gap btn-info" ng-click="readDtreeData()">read</button>
                        <button class="btn btn-gap btn-success" ng-click="updateDtreeData()">update</button>
                        <button class="btn btn-gap btn-danger" ng-click="deleteDtreeData()">delete</button>
                    </div>
                </section>
            </tab>
        </tabset>
    </div>
    <!-- end of ui-tab-container -->
</div>
<!-- end of ui-layout-south -->
</div>

<!--
	This is the template for the main dialog that is displayed. It uses the
dialogCtrl controller in app.js.
-->
<script type="text/ng-template" id="dialogTemplate.html">
    <div ng-controller="dialogCtrl">
    </div>
</script>

<!--
common delete dialog
-->
<script type="text/ng-template" id="deleteDialog.html">
    <div ng-controller="deleteDialogCtrl">
        <p><h4><i class='fa fa-warning'></i>Do you really want to delete this?</h4></p>
        <div class="callout callout-info">
            <p ng-repeat="m in model">
                {{m.name}}
            </p>
        </div>
        <div style="height: 70px; margin-bottom: 10px;">
            <button class="btn btn-gap btn-primary" data-ng-click="confirmClick()"><i class='fa fa-trash-o'></i>&nbsp;delete
            </button>
            <button class="btn btn-gap btn-warning" data-ng-click="cancelClick()"><i class='fa fa-times'></i>cancel
            </button>
        </div>
    </div>
</script>
<!--
add parameter dialog
-->
<script type="text/ng-template" id="addParameterDialog.html">
    <div>
        <div class="panel panel-default">
            <div class="panel-body" ng-controller="addParameterDialogCtrl">
                <form name="form_addParameter" class="form-horizontal form-validation" data-ng-submit="submitForm()">
                    <div class="form-group">
                        <div class="col-sm-3">
                            <label for="paramName">Name</label>
                        </div>
                        <div class="col-sm-9">
                            <input type="text"
                                   id="paramName"
                                   class="form-control"
                                   placeholder="required"
                                   required
                                   data-ng-model="model.name">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-3">
                            <label for="paramDescription">Description</label>
                        </div>
                        <div class="col-sm-9">
                            <textarea id="paramDescription"
                                      class="form-control"
                                      rows="2"
                                      data-ng-model="model.description">
                            </textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-3">
                            <label for="paramDefinition">Definition</label>
                        </div>
                        <div class="col-sm-9">
                            <input type="text"
                                   id="paramDefinition"
                                   class="form-control"
                                   placeholder="required"
                                   required
                                   data-ng-model="model.formula">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-3">
                            <label for="paramCategory">Category</label>
                        </div>
                        <div class="col-sm-9">
                            <input type="text"
                                   id="paramCategory"
                                   class="form-control"
                                   required
                                   placeholder="required"
                                   data-ng-model="model.category">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-3">
                            <label for="paramDisplay">Display</label>
                        </div>
                        <div class="col-sm-9">
                            <label class="switch switch-success">
                                <input id="paramDisplay" type="checkbox" data-ng-model="model.display"><i></i>
                            </label>
                        </div>
                    </div>
                    <div class="divider"></div>
                    <div class="alert alert-info" data-ng-show="showInfoOnSubmit">
                        maybe some info when submit error
                    </div>
                    <button type="submit"
                            class="btn btn-info btn-lg"
                            data-ng-disabled="!form_addParameter.$valid">Save
                    </button>
                    <button type="button"
                            class="btn btn-default btn-lg"
                            data-ng-click="cancelClick()">Cancel
                    </button>


                </form>
            </div>
        </div>
    </div>
</script>


<!--
add distribution dialog
-->
<script type="text/ng-template" id="addDistrDialog.html">
    <div>
        <div class="panel panel-default" ng-controller="addDistrDialogCtrl">
            <form name="form_DistrEdit" class="form-horizontal form-validation" data-ng-submit="saveClick()">
                <div class="panel-body">
                    <fieldset>
                        <div class="col-sm-5">
                            <div angrid="distr_select_option" style="height:530px;"></div>
                        </div>
                        <div class="col-sm-7">
                            <div class="form-group">
                                <a href="select_distr.introduce" target="_blank"><strong class="tl-tile text-primary"><i
                                        class="distr-icon {{select_distr.name}}"></i>about {{select_distr.name}}
                                    distribution</strong></a>
                            </div>
                            <div class="form-group">
                                <label for="select_distr_name" class="col-sm-3">Name</label>

                                <div class="col-sm-9">
                                    <input id="select_distr_name" type="text" class="form-control"
                                           ng-model="model.name" required>
                                    <span class="icon glyphicon glyphicon-star"></span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="select_distr_description" class="col-sm-3">Description</label>

                                <div class="col-sm-9">
                                    <input id="select_distr_description" type="text" class="form-control"
                                           ng-model="model.description">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="select_distr_comment" class="col-sm-3">Comment</label>

                                <div class="col-sm-9">
                                    <textarea id="select_distr_comment" class="form-control" rows="3"
                                              ng-model="model.comment"></textarea>
                                </div>
                            </div>
                            <div class="form-group">
                                <div><strong><span class="glyphicon glyphicon-th"></span>
                                    {{select_distr.name}} Distribution Parameter</strong></div>
                            </div>
                            <div ng-repeat="p in select_distr.parameter">
                                <div class="form-group" ng-show="showOptionalParam(p, showOptional)">
                                    <label for="select_distr_param" class="col-sm-3">{{p.name}}</label>

                                    <div class="col-sm-9">
                                        <input id="select_distr_param" type="text" class="form-control"
                                               ng-model="model.value[$index]" ng-pattern="/^[0-9]+(\.[0-9]+)?$/"/>
                                        <span class="icon glyphicon glyphicon-star" ng-show="!p.optional"></span>
                                    </div>
                                </div>
                            </div>
                            <div ng-show="select_distr.optional">
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="show_optional_flag">
                                            <span ng-hide="showOptional">show</span>
                                            <span ng-show="showOptional">hide</span>
                                            optional paramter
                                        </label>
                                    </div>
                                    <div class="col-sm-6">
                                        <label class="switch switch-success">
                                            <input id="show_optional_flag" type="checkbox"
                                                   ng-model="showOptional"><i></i>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>
                <!-- end of panel-body -->

                <div class="panel-footer panel-default">
                    <button type="submit"
                            class="btn btn-primary"
                            data-ng-disabled="!form_DistrEdit.$valid">Save
                    </button>
                    <button type="button"
                            class="btn btn-warning"
                            data-ng-click="cancelClick()">Cancel
                    </button>
                </div>
                <!-- end of panel-footer -->
            </form>
        </div>
        <!-- end of panel -->
    </div>
</script>

<!--
add table dialog
-->
<script type="text/ng-template" id="addTableDialog.html">
    <div>
        <div class="panel panel-default" ng-controller="addTableDialogCtrl">
            <form name="form_table_edit" class="form-horizontal form-validation" data-ng-submit="saveClick()">
                <div class="panel-body">
                    <fieldset>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="select_table_name" class="col-sm-3">Name</label>

                                <div class="col-sm-9">
                                    <input id="select_table_name" type="text" class="form-control"
                                           ng-model="model.name" required>
                                    <span class="icon glyphicon glyphicon-star"></span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="select_table_description" class="col-sm-3">Description</label>

                                <div class="col-sm-9">
                                    <input id="select_table_description" type="text" class="form-control"
                                           ng-model="model.description">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="select_table_comment" class="col-sm-3">Comment</label>

                                <div class="col-sm-9">
                                    <textarea id="select_table_comment" class="form-control" rows="3"
                                              ng-model="model.comment"></textarea>
                                </div>
                            </div>
                            <div class="form-group">
                                <div><strong><span class="glyphicon glyphicon-th"></span>
                                    Multi-column table setting</strong></div>
                            </div>
                            <div class="form-group">
                                <label for="table_column_number" class="col-sm-4">column number</label>

                                <div class="col-sm-8">
                                    <input id="table_column_number" type="number" class="form-control"
                                           ng-model="model.column" data-ng-pattern="/^[1-9]\d*$/">
                                </div>
                            </div>
                            <div class="form-group">
                                <div>$nbsp;<strong ng-show="model.column < default_column"><span
                                        class="glyphicon glyphicon-info-sign"></span>
                                    Your setting column is smaller than orginal value, it may lose column data, are you
                                    sure?</strong></div>
                            </div>

                        </div>
                    </fieldset>
                </div>
                <!-- end of panel-body -->

                <div class="panel-footer panel-default">
                    <button type="submit"
                            class="btn btn-primary"
                            data-ng-disabled="!form_table_edit.$valid">Save
                    </button>
                    <button type="button"
                            class="btn btn-warning"
                            data-ng-click="cancelClick()">Cancel
                    </button>
                </div>
                <!-- end of panel-footer -->
            </form>
        </div>
        <!-- end of panel -->
    </div>
</script>
